#howto #howto/dev 

uses:: [[Rust]]

%% generated by [[Atlas/Tools/pc/mods/mods]] %%

step 2: Create a new Rust project

  Open a terminal or command prompt and run the following command to create a new
  Rust project:

    cargo new cli_app --bin

  This will create a new directory called  cli_app  with a  src  directory and a
  Cargo.toml  file.

  Step 3: Define your CLI app's functionality

  In this example, we'll create a simple CLI app that takes a name as an argument
  and prints out a greeting message.

  Open the  src/main.rs  file and replace the existing code with the following:

```rust
use std::env;

fn main() {
	let args: Vec<String> = env::args().collect();
	if args.len() != 2 {
		println!("Usage: cli_app <name>");
		return;
	}

	let name = &args[1];
	println!("Hello, {}!", name);
}
```
  
  Here's what this code does:

  • We use the  env  module to access the command-line arguments passed to our app.
  • We collect the arguments into a vector of strings using  env::args().collect() .
  • We check if the length of the arguments vector is not equal to 2, and if so,
  print an error message and return.
  • We extract the second argument (the name) from the vector and store it in the
  name  variable.
  • We print out a greeting message using the  name  variable.

  Step 4: Run your CLI app

  Run your CLI app using the following command:

    cargo run -- John

  Replace  John  with any name you like. You should see the following output:

    Hello, John!

  Step 5: Add CLI argument parsing using clap

  While our app works, it's not very robust. Let's use the  clap  crate to parse
  our CLI arguments. Add the following line to your  Cargo.toml  file:

    [dependencies]
    clap = "2.33"

  Then, update your  src/main.rs  file to use  clap :

```rust
    use clap::{App, Arg};

    fn main() {
        let app = App::new("cli_app")
            .version("1.0")
            .author("Your Name")
            .about("A simple CLI app")
            .arg(Arg::with_name("name")
                 .required(true)
                 .help("Your name"));

        let matches = app.get_matches();

        let name = matches.value_of("name").unwrap();
        println!("Hello, {}!", name);
    }
```
  
  Here's what this code does:

  • We create a new  App  instance with our app's name, version, author, and about
  text.
  • We define a required argument  name  with a help message.
  • We parse the CLI arguments using  get_matches() .
  • We extract the value of the  name  argument using  matches.value_of("name") .
  • We print out a greeting message using the  name  value.

  Step 6: Run your CLI app again

  Run your CLI app again using the following command:

    cargo run -- John

  You should see the same output as before. But now, if you run your app without
  providing a name, you'll see an error message:

    error: The following required arguments were not provided:
      <name>

    USAGE:
        cli_app <name>

    FLAGS:
        -h, --help       Prints help information
        -V, --version    Prints version information

    ARGS:
        <name>    Your name

  That's it! You've developed a basic CLI app in Rust using  clap  for argument
  parsing.